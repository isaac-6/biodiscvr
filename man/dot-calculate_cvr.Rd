% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/search_algorithm.R
\name{.calculate_cvr}
\alias{.calculate_cvr}
\title{Calculate Composite Value Ratio (Internal Helper)}
\usage{
.calculate_cvr(
  chromosome,
  dataset_cohort_data,
  features,
  var_composition,
  fixed_numerator_regs = NULL,
  fixed_denominator_regs = NULL,
  verbose = FALSE
)
}
\arguments{
\item{chromosome}{Numeric vector. Encodes feature selection and weighting.
Values < 1 select target features (weight = 1 - value).
Values between 1 and 2 are ignored (?).
Values > 2 select reference features (weight = value - 2).}

\item{dataset_cohort_data}{List. Should contain at least \verb{$data_suv_bi},
a data frame with SUV values for different regions (columns).
Optionally contains \verb{$data_uv} and \verb{$data_vol} if \code{var_composition = 0}.}

\item{features}{Character vector. Names of all possible features (columns in
\code{data_suv_bi}) corresponding to the indices of \code{chromosome}.}

\item{var_composition}{Integer. Method for combining features:
\itemize{
\item \code{0}: Volume/UV weighted average (Requires \verb{$data_uv}, \verb{$data_vol}).
\item \code{1}: Simple arithmetic mean (\code{rowMeans}).
\item \code{2}: Weighted arithmetic mean (weights from chromosome).
\item \code{3}: Geometric mean (\code{exp(mean(log(values)))}).
}}

\item{fixed_numerator_regs}{fixed numerator regions.}

\item{fixed_denominator_regs}{fixed denominator regions.}

\item{verbose}{Logical. Print verbose messages (mainly for debugging)?}
}
\value{
A numeric vector of the calculated \code{(Target/Reference)} values,
with the same length as \code{nrow(dataset_cohort_data$data_suv_bi)}.
Returns a vector of \code{NA} values if critical errors occur (e.g., missing
columns, invalid chromosome leading to no target/reference regions, division
by zero). Returns \code{-Inf} only if specifically calculated (e.g., log(0)).
}
\description{
Calculates CVR = (Target Composite / Reference Composite) for each row of data,
based on feature selection/weighting defined by a chromosome.
Used internally, typically as part of a GA fitness evaluation.
}
\keyword{internal}
