% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/evaluation.R
\name{fevalMethod}
\alias{fevalMethod}
\title{Evaluate Model Performance Metrics}
\usage{
fevalMethod(
  data,
  group,
  eq_all,
  eq_group,
  all_power_params,
  lmer_control,
  calculate_ci = FALSE,
  nsim = 1000
)
}
\arguments{
\item{data}{Data frame. The input data, expected to contain columns like
'value', 'time', 'ID', 'DX' (0=CU, 1=CI), 'AB' (Amyloid status T/F).
The 'value' column contains the biomarker measurement to be modeled.}

\item{eq_all}{Formula. The formula for the overall separation model (e.g.,
\code{value ~ time*DX + (time|ID)}). Must include a \code{time:DX} interaction.}

\item{eq_group}{Formula. The formula for the within-group models (e.g.,
\code{value ~ time + (time|ID)}).}

\item{calculate_ci}{Logical. If \code{TRUE}, calculate and return bootstrap
confidence intervals for repeatability and separation metrics. Defaults to \code{FALSE}.}

\item{nsim}{Integer. Number of bootstrap simulations to run if \code{calculate_ci}
is \code{TRUE}. Defaults to 100. Be mindful that higher values increase runtime significantly.}

\item{power_params}{List. Parameters for \code{longpower::lmmpower} containing:
\describe{
\item{pct_change_ci}{Percent change for power calculation in CI group.}
\item{t_ci}{Time points for power calculation in CI group (e.g., \code{c(0, 1.5)}).}
\item{power_ci}{Desired power level for CI group (e.g., 0.80).}
\item{pct_change_cu}{Percent change for power calculation in CU group.}
\item{t_cu}{Time points for power calculation in CU group (e.g., \code{c(0, 4.5)}).}
\item{power_cu}{Desired power level for CU group (e.g., 0.80).}
}}
}
\value{
A named numeric vector containing the evaluation metrics.
If \code{calculate_ci} is \code{FALSE}: \code{eRepCI}, \code{eRepCU}, \code{eSep}, \code{nCI}, \code{nCU}.
If \code{calculate_ci} is \code{TRUE}: \code{eRepCI}, \code{eRepCI.lower}, \code{eRepCI.upper},
\code{eRepCU}, \code{eRepCU.lower}, \code{eRepCU.upper}, \code{eSep}, \code{eSep.lower}, \code{eSep.upper},
\code{nCI}, \code{nCI.lower}, \code{nCI.upper}, \code{nCU}, \code{nCU.lower}, \code{nCU.upper}.
Values may be \code{NA} if models fail to converge or required data subsets are empty.
}
\description{
Fits mixed-effects models to evaluate biomarker performance based on
repeatability (error \%), group separation (t-statistic), and sample size
estimates (SSE), optionally calculating bootstrap confidence intervals.
}
\details{
This function wraps internal helpers to perform the following steps:
\enumerate{
\item Fits models using \code{lme4::lmer} based on the provided formulas (\code{eq_all}, \code{eq_group})
and subsets of the data (Amyloid positive CU and CI groups).
\item Extracts repeatability (\code{sd(residuals)}) and separation (\code{t-value} of \code{time:DX}).
\item Estimates sample sizes using \code{longpower::lmmpower}.
\item Optionally performs parametric bootstrapping using \code{lme4::bootMer} to
estimate 95\% confidence intervals for repeatability and separation.
}

Note: Ensure the input \code{data} is appropriately prepared (e.g., scaling time,
handling missing values if necessary before calling this function). Model
convergence is attempted using \code{nloptwrap} optimizer settings. Warnings
will be issued if models fail or required data is missing.
}
